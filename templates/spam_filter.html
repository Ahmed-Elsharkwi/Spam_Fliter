<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style_cheet.css') }}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<form>
    <div class="container">
        <label for="email">Email Address</label>
        <input type="text" id="email" name="email" placeholder="Email Address">

        <label for="content">Content</label>
        <textarea id="content" name="subject" placeholder="content of the email" style="height: 390px;"></textarea>

        <input type="submit" value="Submit">
    </div>
</form>
<script>
    /*
    function validateForm() {
        var email = document.getElementById('email').value;
        var content = document.getElementById('content').value;
        if (email == "" || content == "") {
            alert("All fields must be filled out");
            return false;
        }
	else{
		let url = 'http://localhost:5000/spam_filter/check'; // Replace with your actual API endpoint
		let data = {"email": email, "content": content}; // Replace with your actual data

		fetch(url, {
  		method: 'POST',
  		headers: {
    			'Content-Type': 'application/json'
  		},
  		body: JSON.stringify(data)
		})
		.then(response => response.json())
		.then(data => console.log('Success:', data))
		.catch((error) => console.error('Error:', error));
   	}
  }*/

	$(document).ready(function() {
    	$('input[type="submit"]').click(function(e) {
        e.preventDefault(); // Prevent the form from submitting normally
        var isValid = true;
        $('input[type="text"]').each(function() {
            if ($.trim($(this).val()) == '') {
                isValid = false;
            }
        });
        $('textarea').each(function() {
            if ($.trim($(this).val()) == '') {
                isValid = false;
            }
        });

        if (isValid == false)
           alert("All fields must be filled out");
        else{
           alert('Thank you for submitting');
           var email = document.getElementById('email').value;
           var content = document.getElementById('content').value;
           console.log(email, content)
           let url = 'http://localhost:5000/spam_filter/check'; // Replace with your actual API endpoint
           let data = {"email": email, "content": content}; // Replace with your actual data

           fetch(url, {
               method: 'POST',
               headers: {
                   'Content-Type': 'application/json'
               },
               body: JSON.stringify(data)
           })
           .then(response => response.json())
           .then(data => {
               alert(data.state);
           })
           .catch((error) => console.error('Error:', error));
        }
    });
});


</script>
</body>
</html>
